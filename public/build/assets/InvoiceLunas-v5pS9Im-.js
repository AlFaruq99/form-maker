import{Z as m,i as H,d as _,e as f,o as c,c as r,b as s,a as g,w as d,g as u,k as V,F as p,r as w,f as b,v as C,t as n,l as T,h as y,m as M,j as B,n as L}from"./app-VmSF2JD4.js";import{T as S}from"./Table--r9-itQ3.js";import{h as z}from"./moment-WSJ9un1t.js";import{T as N}from"./Toast-e9s-PVrm.js";import{_ as j}from"./_plugin-vue_export-helper-x3n3nnut.js";const U={components:{TableVue:S,Head:m,Link:H,Toast:N},data(){return{invoiceData:[],length:10,selectedInvoice:[],search:null,selectedStatus:null}},mounted(){this.fetchInvoice()},watch:{length(){this.fetchInvoice()},search(t){t!=null&&t!=""&&this.fetchInvoice()}},methods:{changePageHandler(t){let l=new URL(t);l.searchParams.set("length",this.length),this.fetchInvoice(l.href)},async fetchInvoice(t){let l;t?l=t:l=route("panel.invoice.fetchInvoice",{_query:{status:"lunas",length:this.length,search:this.search}});try{const h=await _.get(l).then(a=>a).catch(a=>{console.log(a)});h.status==200&&(this.invoiceData=h.data,this.invoiceData.data=this.invoiceData.data.map(a=>(a.total=parseFloat(a.total).toLocaleString("id-ID",{style:"currency",currency:"IDR"}),a.tanggal_invoice=z(a.created_at).format("DD-MM-YYYY"),console.log(a),a)))}catch{}},async massDeleteHandler(){try{(await _.post(route("panel.invoice.destroy"),{list:this.selectedInvoice}).catch(l=>{console.log(l)})).status==200&&(this.fetchInvoice(),this.selectedInvoice=[])}catch(t){console.log(t)}},async updateStatusHandler(){try{if((await _.post(route("panel.invoice.update"),{listId:this.selectedInvoice,status:this.selectedStatus})).status==200)this.fetchInvoice();else return}catch(t){console.log(t)}}}},q={class:"grid grid-cols-1 w-full gap-6 col-span-3"},P={class:"card bg-white p-6 grid grid-cols-1 gap-6"},Y=s("p",{class:"font-semibold"},"DP",-1),A={class:"container"},F=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"})],-1),E={class:"container filter-container flex flex-row justify-between"},R={class:"inline-flex space-x-2"},J=s("option",{value:"10"},"10",-1),K=["value","hidden"],W={key:0,class:"w-full inline-flex px-2 space-x-4"},Z=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"})],-1),G=[Z],O={class:"inline-flex space-x-2"},Q={class:"container grid grid-cols-1 gap-6"},X=s("thead",null,[s("tr",null,[s("th"),s("th",null,"No."),s("th",null,"Nomor Invoice"),s("th"),s("th",null,"Dari"),s("th"),s("th",null,"Kepada"),s("th",null,"Tanggal Dibuat"),s("th",null,"Jumlah Item"),s("th",null,"Total Harus Dibayar"),s("th")])],-1),$=["value"],ss={class:"inline-flex space-x-2"},es=s("button",{class:"tooltip","data-tip":"Bagikan Whatsapp"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 text-primary",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M19.05 4.91A9.816 9.816 0 0 0 12.04 2c-5.46 0-9.91 4.45-9.91 9.91c0 1.75.46 3.45 1.32 4.95L2.05 22l5.25-1.38c1.45.79 3.08 1.21 4.74 1.21c5.46 0 9.91-4.45 9.91-9.91c0-2.65-1.03-5.14-2.9-7.01m-7.01 15.24c-1.48 0-2.93-.4-4.2-1.15l-.3-.18l-3.12.82l.83-3.04l-.2-.31a8.264 8.264 0 0 1-1.26-4.38c0-4.54 3.7-8.24 8.24-8.24c2.2 0 4.27.86 5.82 2.42a8.183 8.183 0 0 1 2.41 5.83c.02 4.54-3.68 8.23-8.22 8.23m4.52-6.16c-.25-.12-1.47-.72-1.69-.81c-.23-.08-.39-.12-.56.12c-.17.25-.64.81-.78.97c-.14.17-.29.19-.54.06c-.25-.12-1.05-.39-1.99-1.23c-.74-.66-1.23-1.47-1.38-1.72c-.14-.25-.02-.38.11-.51c.11-.11.25-.29.37-.43s.17-.25.25-.41c.08-.17.04-.31-.02-.43s-.56-1.34-.76-1.84c-.2-.48-.41-.42-.56-.43h-.48c-.17 0-.43.06-.66.31c-.22.25-.86.85-.86 2.07c0 1.22.89 2.4 1.01 2.56c.12.17 1.75 2.67 4.23 3.74c.59.26 1.05.41 1.41.52c.59.19 1.13.16 1.56.1c.48-.07 1.47-.6 1.67-1.18c.21-.58.21-1.07.14-1.18s-.22-.16-.47-.28"})])],-1),ts=s("button",{class:"tooltip","data-tip":"Bagikan Email"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 text-primary",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4l-8 5l-8-5V6l8 5l8-5z"})])],-1),ls=["href"],os=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 text-primary",viewBox:"0 0 24 24"},[s("path",{fill:"currentColor",d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})],-1),ns=[os],as={class:"flex flex-col"},cs={class:"font-semibold"},rs={class:"text-gray-500"},is=s("td",null,[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6",viewBox:"0 0 50 50"},[s("path",{fill:"currentColor",d:"M25 42c-9.4 0-17-7.6-17-17S15.6 8 25 8s17 7.6 17 17s-7.6 17-17 17m0-32c-8.3 0-15 6.7-15 15s6.7 15 15 15s15-6.7 15-15s-6.7-15-15-15"}),s("path",{fill:"currentColor",d:"m24.7 34.7l-1.4-1.4l8.3-8.3l-8.3-8.3l1.4-1.4l9.7 9.7z"}),s("path",{fill:"currentColor",d:"M16 24h17v2H16z"})])],-1),hs={class:"flex flex-col"},ds={class:"font-semibold text-blue-600"},us={class:"text-gray-500"},ps={class:"w-full flex flex-row justify-between"},vs={class:"join"},_s=["onClick","innerHTML"];function fs(t,l,h,a,o,v){const x=f("Link"),D=f("TableVue"),k=f("Toast");return c(),r(p,null,[s("div",q,[s("div",P,[Y,s("div",A,[g(x,{href:t.route("panel.invoice.create",{_query:{status:"lunas"}}),class:"btn btn-md btn-primary float-end"},{default:d(()=>[F,y(" Buat Invoice ")]),_:1},8,["href"])]),s("div",E,[s("div",R,[u(s("select",{class:"select select-bordered w-fit max-w-xs","onUpdate:modelValue":l[0]||(l[0]=e=>o.length=e)},[J,(c(),r(p,null,w(100,(e,i)=>s("option",{value:e,hidden:e%25!=0,key:i},n(e),9,K)),64))],512),[[V,o.length]])]),o.selectedInvoice.length>0?(c(),r("div",W,[s("button",{class:"btn tooltip",onClick:l[1]||(l[1]=(...e)=>v.massDeleteHandler&&v.massDeleteHandler(...e)),"data-tip":"hapus data"},G)])):b("",!0),s("div",O,[u(s("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>o.search=e),type:"text",name:"",class:"input input-bordered input-md w-full max-w-xs",placeholder:"Search..."},null,512),[[C,o.search]])])]),s("div",Q,[g(D,null,{header:d(()=>[X]),body:d(()=>[s("tbody",null,[(c(!0),r(p,null,w(o.invoiceData.data,(e,i)=>(c(),r("tr",{class:"whitespace-nowrap",key:i},[s("td",null,[u(s("input",{"onUpdate:modelValue":l[3]||(l[3]=I=>o.selectedInvoice=I),value:e.id,type:"checkbox",class:"checkbox checkbox-primary"},null,8,$),[[M,o.selectedInvoice]])]),s("td",null,n(o.invoiceData.from+i),1),s("td",null,n(e==null?void 0:e.no_invoice),1),s("td",null,[s("div",ss,[es,ts,s("a",{href:t.route("panel.invoice.download",e.id),class:"tooltip","data-tip":"Unduh"},ns,8,ls)])]),s("td",null,[s("div",as,[s("span",cs,n(e==null?void 0:e.s_company_name),1),s("span",rs,n((e==null?void 0:e.s_company_address)+" - "+(e==null?void 0:e.s_phone_number)),1)])]),is,s("td",null,[s("div",hs,[s("span",ds,n(e==null?void 0:e.d_company_name),1),s("span",us,n((e==null?void 0:e.d_company_address)+" - "+(e==null?void 0:e.d_phone_number)),1)])]),s("td",null,n(e==null?void 0:e.tanggal_invoice),1),s("td",null,n(e==null?void 0:e.item.length),1),s("td",null,n(e==null?void 0:e.total),1),s("td",null,[e.status=="Inactive"?(c(),B(x,{key:0,href:t.route("panel.user.userActivation",{id:e.id}),class:"btn btn-sm text-white bg-blue-500"},{default:d(()=>[y("Activate")]),_:2},1032,["href"])):b("",!0)])]))),128))])]),_:1}),s("div",ps,[s("p",null," Show "+n(o.invoiceData.from)+" - "+n(o.invoiceData.to)+" form total "+n(o.invoiceData.total)+" data ",1),s("div",vs,[(c(!0),r(p,null,w(o.invoiceData.links,(e,i)=>(c(),r("div",{key:i},[s("button",{onClick:()=>{v.changePageHandler(e.url)},class:L(["join-item btn btn-sm",{"bg-primary text-white":e.active}]),innerHTML:e.label},null,10,_s)]))),128))])])])])]),u(g(k,{status:"error",title:"Data dihapus!",message:"Berhasil menghapus data yang dipilih"},null,512),[[T,t.statusPage=="success"]])],64)}const Ds=j(U,[["render",fs]]);export{Ds as default};
