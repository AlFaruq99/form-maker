import{Z as x,i as y,d as _,e as n,o as i,c as D,a as l,w as o,F as b,b as a,n as c,h as u,j as d,f as h}from"./app-zOyMGoWU.js";import{A as L}from"./AuthenticatedLayout-t1IANhWZ.js";import I from"./InvoiceBelumLunas-bBQ7kGJS.js";import k from"./InvoiceDP-oToYtXOG.js";import T from"./InvoiceLunas-huC61w2o.js";import{h as p}from"./moment-WSJ9un1t.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./ApplicationLogo-s_xOihfP.js";import"./ResponsiveNavLink-zJYBqVmo.js";import"./Toast-Y0rCqIJh.js";import"./Table-v0JJUOaL.js";const M={components:{AuthenticatedLayout:L,Head:x,Link:y,InvoiceBelumLunas:I,InvoiceDP:k,InvoiceLunas:T},props:{status:String,userId:Number},data(){return{url_file_path:null,file:null,transaksiDate:new Date,dueDate:new Date,no_invoice:null,s_company_address:null,s_phone_number:null,s_email:null,d_company_address:null,d_phone_number:null,d_email:null,columns:["No","Deskripsi","Qty","Unit","Harga per unit","Diskon","Pajak","Total"],rows:[{description:"",quantity:null,unit:"pcs",price:null,discount:null,tax:null}]}},methods:{onFileChange(t){try{const e=t.target.files[0];this.file=e,console.log(this.file);const s=new FileReader;s.onload=m=>{this.fileData=m.target.result},s.readAsDataURL(e),this.url_file_path=URL.createObjectURL(e)}catch(e){console.log(e)}},clearUrl(){this.url=null;const t=document.getElementById("dropzone-file");t.value=""},formatDate(){this.transaksiDate=p(this.transaksiDate).format("YYYY-MM-DD"),this.dueDate=p(this.dueDate).format("YYYY-MM-DD")},addRow(){this.rows.push({description:"",quantity:0,unit:"pcs",price:0,discount:0,tax:0})},deleteRow(t){this.rows.length>1&&this.rows.splice(t,1)},async createHandler(){try{const t={no_invoice:this.no_invoice,transaction_date:this.transaksiDate,due_date:this.dueDate,file:this.file,invoice_name:this.invoice_name,s_company_name:this.s_company_name,s_company_address:this.s_company_address,s_phone_number:this.s_phone_number,s_email:this.s_email,d_company_name:this.d_company_name,d_company_address:this.d_company_address,d_phone_number:this.d_phone_number,d_email:this.d_email,note:this.note,subtotal:this.grandTotal,discount:this.grandTotalDisc,tax:this.grandTotalTax,total:this.grandTotalAll},e=await _.post(route("client.invoice.create"),t,{headers:{"Content-Type":"multipart/form-data"}});console.log(e)}catch(t){console.log(t)}},generatePdf(){try{const t=_.get(route("client.invoice.stream",{}));if(t.status==200){const e=t.data.link;window.open(e,"_blank")}else console.error("Failed to generate PDF")}catch{console.error("Failed to generate PDF")}}},computed:{grandTotal(){return this.rows.reduce((t,e)=>t+e.quantity*e.price,0)},grandTotalDisc(){return this.rows.reduce((t,e)=>t+e.quantity*e.price*(e.discount/100),0)},grandTotalTax(){return this.rows.reduce((t,e)=>t+e.quantity*e.price*(e.tax/100),0)},grandTotalAll(){return this.grandTotal-this.grandTotalDisc+this.grandTotalTax}},mounted(){this.formatDate()},watch:{rows:{deep:!0,handler(t){for(let e of t)e.total=e.quantity*e.price-e.price*(e.discount/100)}}}},H=a("head",{title:"Invoice"},null,-1),q=a("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Invoice",-1),z={class:"max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 grid grid-cols-1 gap-6 pt-12 pb-24 sm:py-12"},A=a("p",{class:"font-semibold text-lg"},"Manajemen Faktur",-1),C={class:"grid grid-flow-row grid-cols-1 gap-6"},F={class:"max-sm:hidden menu space-x-4 menu-horizontal rounded-md"},P=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5",viewBox:"0 0 16 16"},[a("path",{fill:"currentColor",d:"m8.746 8l3.1-3.1a.527.527 0 1 0-.746-.746L8 7.254l-3.1-3.1a.527.527 0 1 0-.746.746l3.1 3.1l-3.1 3.1a.527.527 0 1 0 .746.746l3.1-3.1l3.1 3.1a.527.527 0 1 0 .746-.746zM8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16"})],-1),V=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M15 16.69V13h1.5v2.82l2.44 1.41l-.75 1.3zM19.5 3.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2L7.5 3.5L6 2L4.5 3.5L3 2v20l1.5-1.5L6 22l1.5-1.5L9 22l1.58-1.58c.14.19.3.36.47.53A7.001 7.001 0 0 0 21 11.1V2zM11.1 11c-.6.57-1.07 1.25-1.43 2H6v-2zm-2.03 4c-.07.33-.07.66-.07 1c0 .34 0 .67.07 1H6v-2zM18 9H6V7h12zm2.85 7c0 .64-.12 1.27-.35 1.86c-.26.58-.62 1.14-1.07 1.57c-.43.45-.99.81-1.57 1.07c-.59.23-1.22.35-1.86.35c-2.68 0-4.85-2.17-4.85-4.85c0-1.29.51-2.5 1.42-3.43c.93-.91 2.14-1.42 3.43-1.42c2.67 0 4.85 2.17 4.85 4.85"})],-1),Y=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor","fill-rule":"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1m0-4H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1m0-4H6c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1m9.7 2.12l-3.17 3.17c-.39.39-1.03.39-1.42 0l-1.41-1.42a.996.996 0 1 1 1.41-1.41l.71.71l2.47-2.47a.996.996 0 0 1 1.41 0l.01.01c.38.39.38 1.03-.01 1.41"})],-1);function N(t,e,s,m,R,U){const r=n("Link"),g=n("InvoiceBelumLunas"),f=n("InvoiceDP"),v=n("InvoiceLunas"),w=n("AuthenticatedLayout");return i(),D(b,null,[H,l(w,null,{header:o(()=>[q]),default:o(()=>[a("div",z,[A,a("div",C,[a("ul",F,[a("li",{class:c(["rounded-md text-neutral-900 bg-white shadow",{"!bg-blue-600 !text-white":s.status.value=="belum_bayar"}])},[l(r,{href:t.route("client.invoice.clientIndex",{_query:{status:"belum_bayar"}})},{default:o(()=>[P,u(" Invoice Belum Dibayar ")]),_:1},8,["href"])],2),a("li",{class:c(["rounded-md text-neutral-900 bg-white shadow",{"!bg-blue-600 !text-white":s.status.value=="dp"}])},[l(r,{href:t.route("client.invoice.clientIndex",{_query:{status:"dp"}})},{default:o(()=>[V,u(" Invoice DP ")]),_:1},8,["href"])],2),a("li",{class:c(["rounded-md text-neutral-900 bg-white shadow",{"!bg-blue-600 !text-white":s.status.value=="lunas"}])},[l(r,{href:t.route("client.invoice.clientIndex",{_query:{status:"lunas"}})},{default:o(()=>[Y,u(" Invoice Lunas ")]),_:1},8,["href"])],2)]),s.status.value=="belum_bayar"?(i(),d(g,{key:0,"user-id":s.userId},null,8,["user-id"])):h("",!0),s.status.value=="dp"?(i(),d(f,{key:1,"user-id":s.userId},null,8,["user-id"])):h("",!0),s.status.value=="lunas"?(i(),d(v,{key:2,"user-id":s.userId},null,8,["user-id"])):h("",!0)])])]),_:1})],64)}const $=B(M,[["render",N]]);export{$ as default};
